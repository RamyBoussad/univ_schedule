{% load static %} 
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Application web EDT</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{%static 'bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{%static 'style.css' %}" rel="stylesheet">
</head>

<body>
    <div class="container-fluid position-relative d-flex p-0">
        <!-- Spinner Start -->
        <div id="spinner"
            class="bg-dark position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Sidebar Start -->
        <div class="sidebar pe-4 pb-3">
            <nav class="navbar bg-secondary navbar-dark">
                <a href="index.html" class="navbar-brand mx-4 mb-3">
                    <h3 class="text-primary"><i class="fa fa-user-edit me-2"></i>EDT</h3>
                </a>
                <div class="d-flex align-items-center ms-4 mb-4">
                    <div class="position-relative">
                        <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                        <div
                            class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1">
                        </div>
                    </div>
                    <div class="ms-3">
                        <h6 class="mb-0">Sofiane Chelghoum</h6>
                        <span>Admin</span>
                    </div>
                </div>
                <div class="navbar-nav w-100">
                      <a href="index.html" class="nav-item nav-link"><i class="fas fa-home"></i>Home</a>
                    <a href="listprof.html" class="nav-item nav-link"><i class="fas fa-chalkboard-teacher"></i>Enseignants</a>
                    <a href="listetudiant.html" class="nav-item nav-link"><i class="fas fa-user-graduate"></i>Etudiants</a>
                    <a href="listsalles.html" class="nav-item nav-link"><i class="fas fa-book-reader"></i>Salles</a>
                    <a href="Modules.html" class="nav-item nav-link"><i class="fas fa-book-reader"></i>Modules</a>
                    <a href="Spécialités.html" class="nav-item nav-link active"><i class="fa fa-table me-2"></i>Divisions</a>
                    <a href="listadmins.html" class="nav-item nav-link"><i class="fas fa-chalkboard-teacher"></i>Administrateurs</a>
                    <a href="EDT.html" class="nav-item nav-link"><i class="far fa-calendar-alt"></i>Emplois du
                        temps</a>


                </div>
            </nav>
        </div>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <nav class="navbar navbar-expand bg-secondary navbar-dark sticky-top px-4 py-0">
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><i class="fa fa-user-edit"></i></h2>
                </a>
                <a href="#" class="sidebar-toggler flex-shrink-0">
                    <i class="fa fa-bars"></i>
                </a>

                <div class="navbar-nav align-items-center ms-auto">
                    
                    
                    <div class="nav-item dropdown">
                        
                        <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">My Profile</a>
                            <a href="#" class="dropdown-item">Settings</a>
                            <a href="#" class="dropdown-item">Log Out</a>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- Navbar End -->


            <!-- Table Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">

                    <div class="col-12">
                        <div class="bg-secondary rounded h-100 p-4">
                            <h6 class="mb-4">Liste Divisions</h6>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Type Division</th>
                                            <th scope="col">libélé</th>
                                            <th scope="col">Nombre Etudiants</th>
                                            <th scope="col">Sur Division</th>
                                            <th scope="col">Actions</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for user in specialites %}  <!-- Correction ici pour la variable de la boucle -->
                                        <tr>
                                            <td> {{ user.idDivision}} </td>
                                            <td> {{ user.typeDivision}}</td>
                                            <td> {{ user.libele}} </td>
                                            <td> {{ user.nbrEtudiant}} </td>
                                            <td> {{ user.surDivision}}</td>
                                            <div  id="btn">
                                                <td> 
                                                    
                                                    <form action="{% url 'supprimer_ligne_specialite' user_id=user.idDivision %}" method="post">
                                                        <button type="button" style="color: white" class="btn btn-square btn-outline-primary m-2 edit-btn" data-id="{{ user.idDivision }}" data-bs-toggle="modal" data-bs-target="#Modalmodens-{{ user.idDivision }}"><i class="fas fa-edit"></i></button>

                                                     
                                                        {% csrf_token %}  
                                                        <button type="submit" style="color: white;" class="btn btn-square btn-outline-primary m-2" name="supprimer" id="idajouter">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </form>
                                                    
                                                </td>       
                                            </div>
                                            
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                                <label for=""
                                    style="display: inline; text-decoration: underline;  font-weight: bolder;">
                                    Action:</label>
                                <div>

                                    <button type="button" data-bs-toggle="modal" data-bs-target="#modaladdspecialite"
                                        class="btn btn-outline-success">Ajouter</button>



                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Table End -->
            <!-- modal  -->
            <!-- modal ajouter  -->


            <div class="modal fade" id="modaladdspecialite" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form method="POST" action="{% url 'ajoutSpec' %}">
                            {% csrf_token %}
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Ajouter une Division </h5>

                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">


                                <!-- table-responsive : est une classe de bootstrape qui permet d'avoir un tableau responsive -->

                                
                                    <div class="table-responsive">
                                        <!-- table-responsive : est une classe de bootstrape qui permet d'avoir un tableau responsive -->
                                        <table id="formajout">
                                            <!-- specialité et capacité  ET groupe -->
                                            <tr>
                                                <div class="form-floating mb-3">
                                                    <td>

                                                        <select name="type" id="optniv" class="form-control" placeholder="Division"> Division
                                                            <option value=""></option>
                                                            <option value="Niveau">Niveau</option>
                                                            <option value="Specialite">Specialite</option>
                                                            <option value="Section">Section</option>
                                                            <option value="Groupe">Groupe</option>
                                                                
                                                        </select>

                                                    </td>
                                                    <td><input type="text" class="form-control" id="floatingInput" name="libele"
                                                            placeholder="libélé"> </td>

                                                    <td>
                                                        <input type="number" class="form-control" id="floatingInput" name="nombre"
                                                            placeholder="nombre"> </td>
                                                    </td>
                                                      
                                                    
                                                </div>
                                            </tr>
                                            <tr>
                                                <td>

                                                    <input type="text" class="form-control" id="floatingInput" name="surtype"
                                                            placeholder="Sur Division"> </td>

                                                </td>
                                                 </tr> 

                                        







                                        </table>
                                    </div>
                                
                                <!-- name >>>>>> il vas nous servire pour le php -->
                                <!-- id >>>>> js -->





                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-success"
                                    data-bs-dismiss="modal">Fermer</button>
                                <button type="submit" class="btn btn-outline-success">Valider</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>




            <!-- modal modifier  -->
            {% for user in specialites %}
            <div class="modal fade" id="Modalmodens-{{ user.idDivision }}" tabindex="-1" aria-labelledby="ModalLabelmod{{ user.idDivision }}" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form method="POST" action="{% url 'modifier_division' division_id=user.idDivision %}">
                            {% csrf_token %}
                            <div class="modal-header">
                                <h5 class="modal-title" id="ModalLabelmod-{{ user.idDivision }}">Modifier une Division</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            
                            <div class="modal-body">
                                <input type="hidden" id="edit-id-{{ user.idDivision }}" name="id" value="{{ user.idDivision }}">
                                <div class="form-floating mb-3">
                                    <select name="m_type" id="edit-nom-{{ user.idDivision }}" class="form-control" placeholder="Division">
                                        <option value="Niveau" {% if user.typeDivision == "Niveau" %}selected{% endif %}>Niveau</option>
                                        <option value="Specialite" {% if user.typeDivision == "Specialite" %}selected{% endif %}>Specialite</option>
                                        <option value="Section" {% if user.typeDivision == "Section" %}selected{% endif %}>Section</option>
                                        <option value="Groupe" {% if user.typeDivision == "Groupe" %}selected{% endif %}>Groupe</option>
                                    </select>
                                    
                                    <label for="edit-nom-{{ user.idAdmin }}">Division</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="edit-prenom-{{ user.idDivision }}" name="m_libele" value="{{ user.libele }}" placeholder="libélé">
                                    <label for="edit-prenom-{{ user.idDivision }}">Libélé  </label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="number" class="form-control" id="edit-prenom-{{ user.idDivision }}" name="m_nbr" value="{{ user.nbrEtudiant }}" placeholder="Nombre Etudiants">
                                    <label for="edit-prenom-{{ user.idDivision }}">Nombre Etudiants  </label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="edit-prenom-{{ user.idDivision }}" name="m_surtype" value="{{ user.surDivision }}" placeholder="Sur Division ">
                                    <label for="edit-prenom-{{ user.idDivision }}"> Sur Division  </label>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                                <button type="submit" class="btn btn-primary">Valider</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
            <!-- modal supp -->
            <div class="modal fade" id="Modalsuppspc" tabindex="-1" aria-labelledby="ModalLabelsupp" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="ModalLabelsupp">Supprimer une spécialité </h5>

                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">


                            <!-- table-responsive : est une classe de bootstrape qui permet d'avoir un tableau responsive -->

                            <form action="">
                                <div class="table-responsive">
                                    <!-- table-responsive : est une classe de bootstrape qui permet d'avoir un tableau responsive -->
                                    <table id="formajout">
                                        <tr>
                                            <div class="form-floating mb-3">
                                                <td>

                                                    <select name="" id="optspc" class="form-control">
                                                        <option value="GL">GL</option>
                                                        <option value="ASR">ASR</option>
                                                        <option value="SIA">SIA</option>
                                                        <option value="GL">GL</option>
                                                        <option value="GL">GL</option>

                                                    </select>

                                                </td>
                                                <td><input type="number" class="form-control" id="floatingInput"
                                                        placeholder="Capacité "> </td>
                                                <td colspan="2">
                                                    <input type="number" class="form-control" id="floatingInput"
                                                        placeholder="Niveau">
                                                </td>
                                            </div>
                                        </tr>



                                    </table>
                                </div>
                            </form>
                            <!-- name >>>>>> il vas nous servire pour le php -->
                            <!-- id >>>>> js -->





                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-success"
                                data-bs-dismiss="modal">Fermer</button>
                            <button type="button" class="btn btn-outline-success">Valider</button>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Footer Start -->
            <div class="container-fluid pt-4 px-4">

            </div>
            <!-- Footer End -->
        </div>
        <!-- Content End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top" style="display: none;"><i
                class="bi bi-arrow-up"></i></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/chart/chart.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>


</body>

</html>